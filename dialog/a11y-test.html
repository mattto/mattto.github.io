<!DOCTYPE html>
<title>Basic dialog accessibility sample</title>
<meta name="viewport" content="initial-scale=1.0">
<body>
<p>
Paragraph text

<p>
<label for="i">Prompt:</label>
<input type="text" name="i" id="i">

<p>
<button id="open-modal-dialog">Open modal dialog</button>
<button id="open-modal-dialog-with-autofocused-button">Open modal dialog with autofocused button</button>
<button id="open-modal-dialog-with-focus">Open modal dialog that itself is focused</button>

<dialog id="modal-dialog">
I'm in the modal dialog.
<button>Close</button>
</dialog>

<dialog id="modal-dialog-with-autofocused-button">
I'm in the modal dialog.
<button autofocus>Close</button>
</dialog>

<dialog id="modal-dialog-with-focus" tabindex=0>
I'm in the modal dialog.
<button>Close</button>
</dialog>
<script>
document.querySelector('#open-modal-dialog').addEventListener('click', function(e) {
    document.querySelector('#modal-dialog').showModal();
});
document.querySelector('#open-modal-dialog-with-autofocused-button').addEventListener('click', function(e) {
    document.querySelector('#modal-dialog-with-autofocused-button').showModal();
});
document.querySelector('#open-modal-dialog-with-focus').addEventListener('click', function(e) {
    var dialog = document.querySelector('#modal-dialog-with-focus');
    dialog.showModal();
    dialog.focus();
});

var closeButtons = document.querySelectorAll('dialog button');
for (i = 0; i < closeButtons.length; ++i) {
    closeButtons[i].addEventListener('click', function(e) {
        e.currentTarget.parentNode.close();
    });
}
</script>
</body>
